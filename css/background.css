/* css/background.css */
/* Background layers only: video + canvas + overlays (noise, scanlines, vignette) */

/* Fullscreen background video (lowest layer) */
#bg-video{
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -1;          /* CHANGED: was -2, now -1 so it's visible */
  pointer-events: none;
  filter: saturate(1.15) contrast(1.08) brightness(0.60);
}

/* Subtle neon haze (above video) */
body::before{
  content: "";
  position: fixed;
  inset: -20%;
  z-index: 0;           /* CHANGED: was 1, now 0 so it sits right above video */
  pointer-events: none;
  background:
    radial-gradient(circle at 20% 35%, rgba(0,255,255,0.08), transparent 45%),
    radial-gradient(circle at 75% 60%, rgba(255,0,128,0.07), transparent 48%),
    radial-gradient(circle at 50% 50%, rgba(176,255,0,0.03), transparent 55%);
  filter: blur(2px);
}

/* Fullscreen canvas above the video + haze */
#bg-canvas{
  position: fixed;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 1;           /* CHANGED: was 0, now 1 */
  pointer-events: none;
  display: block;
}

/* Shared overlay base */
.bg-overlay{
  position: fixed;
  inset: 0;
  z-index: 2;           /* CHANGED: was 2, stays 2 but now correct relative to canvas */
  pointer-events: none;
}

/* Vignette to pull focus to center */
.bg-overlay::before{
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 50% 45%,
      rgba(0,0,0,0.10) 0%,
      rgba(0,0,0,0.55) 65%,
      rgba(0,0,0,0.82) 100%);
}

/* Noise layer (uses your tiling assets/img/noise.png) */
.bg-noise{
  opacity: 0.10;
  mix-blend-mode: overlay;
  background-image: url("../assets/img/noise.png");
  background-repeat: repeat;
  background-size: 220px 220px;
  animation: noiseDrift 8s linear infinite;
}

/* Scanlines layer (pure CSS repeating gradient) */
.bg-scanlines{
  opacity: 0.16;
  background-image:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,0.05) 0px,
      rgba(255,255,255,0.05) 1px,
      rgba(0,0,0,0.00) 2px,
      rgba(0,0,0,0.00) 4px
    );
  animation: scanFlicker 3.6s linear infinite;
}

/* Tiny movement so it doesn't feel static */
@keyframes noiseDrift{
  0%   { transform: translate3d(0,0,0); }
  100% { transform: translate3d(-80px, -60px, 0); }
}

@keyframes scanFlicker{
  0%, 100% { opacity: 0.14; }
  50%      { opacity: 0.18; }
}

/* Reduced motion: keep overlays static */
@media (prefers-reduced-motion: reduce){
  .bg-noise{ animation: none; }
  .bg-scanlines{ animation: none; }
  #bg-video{ filter: saturate(1.05) contrast(1.02) brightness(0.62); }
}
